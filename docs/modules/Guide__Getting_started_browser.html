<!DOCTYPE html><html class="default no-js"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Guide: Getting started browser | @bryntum/siesta</title><meta name="description" content="Documentation for @bryntum/siesta"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@bryntum/siesta</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@bryntum/siesta</a></li><li><a href="Guide__Getting_started_browser.html">Guide: Getting started browser</a></li></ul><h1>Module Guide: Getting started browser</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Variables</h3><ul class="tsd-index-list"><li class="tsd-kind-variable tsd-parent-kind-module"><a href="Guide__Getting_started_browser.html#GettingStartedBrowserGuide" class="tsd-kind-icon">Getting<wbr/>Started<wbr/>Browser<wbr/>Guide</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Variables</h2><section class="tsd-panel tsd-member tsd-kind-variable tsd-parent-kind-module"><a id="GettingStartedBrowserGuide" class="tsd-anchor"></a><h3>Getting<wbr/>Started<wbr/>Browser<wbr/>Guide</h3><div class="tsd-signature tsd-kind-icon">Getting<wbr/>Started<wbr/>Browser<wbr/>Guide<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">&quot;&quot;</span><span class="tsd-signature-symbol"> = &#39;&#39;</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/bryntum/siesta/blob/190b64e/packages/siesta/src/guides/getting_started_browser/getting_started_browser.ts#L7">siesta/src/guides/getting_started_browser/getting_started_browser.ts:7</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">

<a href="#getting-started-with-siesta-in-browser-environment" id="getting-started-with-siesta-in-browser-environment" style="color: inherit; text-decoration: none;">
  <h1>Getting started with Siesta in browser environment</h1>
</a>
<p>Siesta is a stress-free JavaScript/TypeScript testing tool. It is ubiquitous - tests can be run in browsers, Node.js and Deno, on Linux, macOS and Windows.
Moreover, in browsers, both in-process and out-of-process execution is supported.</p>
<p>In this guide, we assume a setup, pointed toward running tests in browsers, using in-process execution.</p>
<p>Siesta supports modern, ever-green browsers only - Chrome, Firefox, Safari and Chromium Edge. IE, legacy Edge and quirks mode are not supported.</p>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h1>Installation</h1>
</a>
<p>Running tests in browsers is supported with the Node.js launcher only, so Siesta should be installed via <code>npm</code> package manager:</p>
<pre><code class="language-shell"><span class="hl-0">npm install @bryntum/siesta --save-dev</span>
</code></pre>
<p>You should be able to run the Siesta launcher after installation, using the <code>npx</code> command:</p>
<pre><code class="language-shell"><span class="hl-0">npx siesta --help</span>
</code></pre>

<a href="#basics" id="basics" style="color: inherit; text-decoration: none;">
  <h1>Basics</h1>
</a>
<p>To familiarize yourself with the basic Siesta concepts, which are common for all execution environments, please check the <a href="Guide__Testing_basics.html#SiestaTestBasicsGuide">Siesta test basics</a> guide. </p>

<a href="#in-process-execution-model" id="in-process-execution-model" style="color: inherit; text-decoration: none;">
  <h1>In-process execution model</h1>
</a>
<p>Siesta runs the browser tests right on the browser page, so called &quot;in-process&quot; (or &quot;in-page&quot;) execution. This means, your test file has full access to the page and Web API. There&#39;s no need to use the asynchronous <code>evaluate</code> command as commonly seen in tools like Playwright, Puppeteer and Selenium. </p>
<p>Such architecture means that test script can create and manipulate arbitrary DOM, using the regular Web API. For example, test can render some Web component and then check that its DOM object is properly created by accessing its <code>style</code> attribute directly.</p>
<p>However, test script will not survive the page redirect or reload. You should avoid doing that. In the future release we will allow running the script in the side iframe, which will survive the <em>same-domain</em> redirects of the testing page.</p>
<p>If you need to test the page with arbitrary redirects, then instead <a href="Guide__Getting_started_Node_js.html#GettingStartedNodejsGuide">write your tests as Node.js scripts</a> and use the &quot;classic&quot; Playwright API to create the page instance and <code>evalulate</code> command of those libraries (&quot;out-of-page&quot; execution model). In the future releases, we&#39;ll provide an unified API for both on-page and out-of-page testing scenarios.</p>

<a href="#importing-api" id="importing-api" style="color: inherit; text-decoration: none;">
  <h1>Importing API</h1>
</a>
<p>When targeting browser environment for running tests, import the Siesta API from the <code>@bryntum/siesta/browser.js</code> entry file.</p>

<a href="#support-for-the-bare-import-specifiers" id="support-for-the-bare-import-specifiers" style="color: inherit; text-decoration: none;">
  <h1>Support for the bare import specifiers</h1>
</a>
<p>Siesta itself is &quot;transpilation&quot; process agnostic and assumes native EcmaScript setup. However, Ecma spec does not define the behavior for the &quot;bare import specifiers&quot;, like <code>import { it } from &quot;@bryntum/siesta/browser.js&quot;</code>. The proposed solution for it, <a href="https://github.com/WICG/import-maps">import maps</a> is only <a href="https://github.com/WICG/import-maps/issues/235">partially</a> supported in Chrome. </p>
<p>This means that the bundler-free development is still the shiny future (hopefully not a distant one) and in the meantime, an extra transpilation step / development web server is needed. We recommend <a href="https://vitejs.dev/">Vite</a> for this purpose, as a modern and very fast alternative to Webpack. However, any development server will work.</p>
<p>The example we made for a test suite targeting browsers, works with Vite with zero configuration. Yes, no Vite config is needed! This is kind of impressive, comparing how much hassle it can be with configuring the other bundling tools. See the <code>examples/browser</code>.</p>
<p>That example is very simple, it is possible that more complex apps will require certain configuration. 
In any case, the configuration should consist no more than in <strong>specifying the test files as entry points</strong>:</p>
<pre><code class="language-javascript"><span class="hl-5">/**</span><br/><span class="hl-5"> * </span><span class="hl-6">@type</span><span class="hl-5"> </span><span class="hl-8">{ import(&#39;vite&#39;).UserConfig }</span><br/><span class="hl-5"> */</span><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-9">config</span><span class="hl-0"> = {</span><br/><span class="hl-0">    </span><span class="hl-2">optimizeDeps    :</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-2">entries     :</span><span class="hl-0"> [</span><br/><span class="hl-0">            </span><span class="hl-4">&#39;./tests/index.js&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">            </span><span class="hl-4">&#39;./tests/**/*.t.js&#39;</span><br/><span class="hl-0">        ]</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-1">export</span><span class="hl-0"> </span><span class="hl-1">default</span><span class="hl-0"> </span><span class="hl-2">config</span>
</code></pre>
<p>Once you have this config in place, you can launch the development web server with: <code>npx vite</code></p>

<a href="#launching-individual-test" id="launching-individual-test" style="color: inherit; text-decoration: none;">
  <h1>Launching individual test</h1>
</a>
<p>Let&#39;s assume we have the following Siesta test file, called <code>basic_test.t.js</code>, which is available on the web URL as <code>http://localhost:3000/tests/basic_test.t.js</code>. We assume Vite server running. </p>
<pre><code class="language-javascript"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">it</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-4">&quot;@bryntum/siesta/browser.js&quot;</span><br/><br/><span class="hl-3">it</span><span class="hl-0">(</span><span class="hl-4">&#39;Basic Siesta test&#39;</span><span class="hl-0">, </span><span class="hl-6">async</span><span class="hl-0"> </span><span class="hl-2">t</span><span class="hl-0"> </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">t</span><span class="hl-0">.</span><span class="hl-3">true</span><span class="hl-0">(</span><span class="hl-6">true</span><span class="hl-0">, </span><span class="hl-4">&quot;That&#39;s true&quot;</span><span class="hl-0">)</span><br/><br/><span class="hl-0">    </span><span class="hl-2">t</span><span class="hl-0">.</span><span class="hl-3">true</span><span class="hl-0">(</span><span class="hl-6">false</span><span class="hl-0">, </span><span class="hl-4">&quot;That&#39;s not true&quot;</span><span class="hl-0">)</span><br/><span class="hl-0">})</span><br/><br/><br/><span class="hl-3">it</span><span class="hl-0">(</span><span class="hl-4">&#39;Deep equality should work&#39;</span><span class="hl-0">, </span><span class="hl-6">async</span><span class="hl-0"> </span><span class="hl-2">t</span><span class="hl-0"> </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">t</span><span class="hl-0">.</span><span class="hl-3">equal</span><span class="hl-0">([ </span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0"> ], [ </span><span class="hl-7">3</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">1</span><span class="hl-0"> ], </span><span class="hl-4">&quot;Arrays are deeply equal&quot;</span><span class="hl-0">)</span><br/><br/><span class="hl-0">    </span><span class="hl-2">t</span><span class="hl-0">.</span><span class="hl-3">expect</span><span class="hl-0">(</span><br/><span class="hl-0">        { </span><span class="hl-2">receivedKey :</span><span class="hl-0"> </span><span class="hl-4">&#39;receivedValue&#39;</span><span class="hl-0">, </span><span class="hl-2">commonKey :</span><span class="hl-0"> </span><span class="hl-4">&#39;commonValue&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">    ).</span><span class="hl-3">toEqual</span><span class="hl-0">(</span><br/><span class="hl-0">        { </span><span class="hl-2">expectedKey :</span><span class="hl-0"> </span><span class="hl-4">&#39;expectedValue&#39;</span><span class="hl-0">, </span><span class="hl-2">commonKey :</span><span class="hl-0"> </span><span class="hl-4">&#39;commonValue&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">    )</span><br/><span class="hl-0">})</span>
</code></pre>
<p>We can launch it, by providing its url to the launcher. The <code>--browser</code> option defines in which browser to run the test. By default, its <code>chrome</code>.</p>
<pre><code class="language-shell"><span class="hl-0">npx siesta http://localhost:3000/my_project/tests/basic_test.t.js --brower firefox</span>
</code></pre>
<p>You should see something like:
<img src="../media/getting_started_browser/getting_started_browser_1.jpg" alt="Launching test directly"></p>

<a href="#launching-test-suite" id="launching-test-suite" style="color: inherit; text-decoration: none;">
  <h1>Launching test suite</h1>
</a>
<p>To launch the whole test suite, one need to create the <a href="Guide__Siesta_project.html#SiestaProjectGuide">Siesta project</a>.</p>
<p>Note, that currently, browser projects do not have the access to the file system and need to list all the test files manually, using the <a href="../classes/index.Project.html#plan">Project.plan</a> method. This is to support the use case, of running the project fully in the browser, without relying on any OS process, which is convenient for debugging. In the future, we plan improve this.</p>

<a href="#simulating-user-actions" id="simulating-user-actions" style="color: inherit; text-decoration: none;">
  <h1>Simulating user actions</h1>
</a>
<p>Siesta supports simulating user actions, like clicking and typing. Simulation is performed with native events, so it triggers
the regular native browser behavior, like <code>:hover</code> styling, etc. In the future, we also plan to port the synthetic events
simulation from Siesta 5, which should work a bit faster, but will have limitations.</p>
<p>To simulate user action, just call an appropriate method. All of them are async:</p>
<pre><code class="language-javascript"><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">t</span><span class="hl-0">.</span><span class="hl-3">click</span><span class="hl-0">(</span><span class="hl-4">&#39;#target-element&#39;</span><span class="hl-0">)</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">t</span><span class="hl-0">.</span><span class="hl-3">dragTo</span><span class="hl-0">(</span><span class="hl-4">&#39;#source-element&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;#target-element&#39;</span><span class="hl-0">)</span><br/><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">t</span><span class="hl-0">.</span><span class="hl-3">type</span><span class="hl-0">(</span><span class="hl-4">&#39;#input-element&#39;</span><span class="hl-0">, </span><span class="hl-4">&#39;some text[ENTER]&#39;</span><span class="hl-0">)</span>
</code></pre>
<p>Please refer to the documentation of the individual simulation methods:</p>
<ul>
<li><a href="../classes/browser.TestBrowser.html#click">TestBrowser.click</a></li>
<li><a href="../classes/browser.TestBrowser.html#rightClick">TestBrowser.rightClick</a></li>
<li><a href="../classes/browser.TestBrowser.html#doubleClick">TestBrowser.doubleClick</a></li>
<li><a href="../classes/browser.TestBrowser.html#moveMouseTo">TestBrowser.moveMouseTo</a></li>
<li><a href="../classes/browser.TestBrowser.html#moveMouseBy">TestBrowser.moveMouseBy</a></li>
<li><a href="../classes/browser.TestBrowser.html#dragTo">TestBrowser.dragTo</a></li>
<li><a href="../classes/browser.TestBrowser.html#dragBy">TestBrowser.dragBy</a></li>
<li><a href="../classes/browser.TestBrowser.html#type">TestBrowser.type</a></li>
<li><a href="../classes/browser.TestBrowser.html#keyPress">TestBrowser.keyPress</a></li>
</ul>

<a href="#preload-some-files-on-the-test-page-before-executing" id="preload-some-files-on-the-test-page-before-executing" style="color: inherit; text-decoration: none;">
  <h1>Preload some files on the test page before executing</h1>
</a>
<p>One can load additional resources on the test page, before running it, using the <a href="../classes/browser._internal_.TestDescriptorBrowser.html#preload">preload</a> config. Currently, it is only
recognized when provided in the <a href="Guide__Siesta_project.html#SiestaProjectGuide">project file</a>.</p>
<p>This config allows you to load a JavaScript file, JavaScript module or CSS file on the page.</p>

<a href="#using-external-page-for-test" id="using-external-page-for-test" style="color: inherit; text-decoration: none;">
  <h1>Using external page for test</h1>
</a>
<p>One can also use an external web page for running the test, for example generated by some external application.
This can be done with the <a href="../classes/browser._internal_.TestDescriptorBrowser.html#pageUrl">pageUrl</a> config. Currently, it is only
recognized when provided in the <a href="Guide__Siesta_project.html#SiestaProjectGuide">project file</a>.</p>

<a href="#debugging" id="debugging" style="color: inherit; text-decoration: none;">
  <h1>Debugging</h1>
</a>
<p>To debug the browser test, place a <code>debugger</code> statement in it, then launch it as an individual test, with additional option <code>--headless=false</code>: </p>
<pre><code class="language-shell"><span class="hl-0">npx siesta http://localhost/my_project/tests/basic_test.t.js --brower firefox --headless=false</span>
</code></pre>
<p>Launcher will start the browser with the dev tools opened. </p>

<a href="#copyright-and-license" id="copyright-and-license" style="color: inherit; text-decoration: none;">
  <h1>COPYRIGHT AND LICENSE</h1>
</a>
<p>MIT License</p>
<p>Copyright (c) 2009-2021 Bryntum, Nickolay Platonov</p>
</div></div></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="Guide__Auto_waiting.html">Guide: <wbr/>Auto waiting</a></li><li class=" tsd-kind-module"><a href="Guide__Getting_started_Deno.html">Guide: <wbr/>Getting started <wbr/>Deno</a></li><li class=" tsd-kind-module"><a href="Guide__Getting_started_Node_js.html">Guide: <wbr/>Getting started <wbr/>Node.js</a></li><li class=" tsd-kind-module"><a href="Guide__Getting_started_Sencha.html">Guide: <wbr/>Getting started <wbr/>Sencha</a></li><li class="current tsd-kind-module"><a href="Guide__Getting_started_browser.html">Guide: <wbr/>Getting started browser</a></li><li class=" tsd-kind-module"><a href="Guide__Reports.html">Guide: <wbr/>Reports</a></li><li class=" tsd-kind-module"><a href="Guide__Siesta_project.html">Guide: <wbr/>Siesta project</a></li><li class=" tsd-kind-module"><a href="Guide__Special_key_names.html">Guide: <wbr/>Special key names</a></li><li class=" tsd-kind-module"><a href="Guide__Testing_advanced.html">Guide: <wbr/>Testing advanced</a></li><li class=" tsd-kind-module"><a href="Guide__Testing_basics.html">Guide: <wbr/>Testing basics</a></li><li class=" tsd-kind-module"><a href="browser.html">browser</a></li><li class=" tsd-kind-module"><a href="deno.html">deno</a></li><li class=" tsd-kind-module"><a href="index.html">index</a></li><li class=" tsd-kind-module"><a href="nodejs.html">nodejs</a></li><li class=" tsd-kind-module"><a href="sencha.html">sencha</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-variable tsd-parent-kind-module"><a href="Guide__Getting_started_browser.html#GettingStartedBrowserGuide" class="tsd-kind-icon">Getting<wbr/>Started<wbr/>Browser<wbr/>Guide</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>